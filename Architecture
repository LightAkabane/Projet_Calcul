┌─────────────┐
│   Caméra    │
└──────┬──────┘
       │ Frame vidéo
       ▼
┌─────────────────────┐
│   YOLOv8 Detector   │  ← Détecte toutes les personnes
│   (yolov8n.onnx)    │     [box1, box2, box3, ...]
└──────┬──────────────┘
       │ Détections
       ▼
┌─────────────────────────────────────────┐
│           PersonTracker                 │
│  ┌───────────────────────────────────┐  │
│  │ 1. Crop chaque personne détectée  │  │
│  └───────────────┬───────────────────┘  │
│                  │                       │
│  ┌───────────────▼───────────────────┐  │
│  │ 2. Extrait embedding ReID         │  │
│  │    (osnet_x0_25_msmt17.onnx)      │  │
│  │    → vecteur 512D par personne    │  │
│  └───────────────┬───────────────────┘  │
│                  │                       │
│  ┌───────────────▼───────────────────┐  │
│  │ 3. Match avec tracks actifs       │  │
│  │    - IOU position (30%)           │  │
│  │    - Similarité embedding (70%)   │  │
│  └───────────────┬───────────────────┘  │
│                  │                       │
│  ┌───────────────▼───────────────────┐  │
│  │ 4. Cherche dans historique global │  │
│  │    Si match → Personne reconnue!  │  │
│  │    Sinon → Nouvelle personne      │  │
│  └───────────────┬───────────────────┘  │
│                  │                       │
│  ┌───────────────▼───────────────────┐  │
│  │ 5. Mise à jour compteurs          │  │
│  │    uniqueCount: personnes uniques │  │
│  │    activeCount: présentes maintenant │
│  └───────────────────────────────────┘  │
└─────────────────────────────────────────┘
       │ Tracks + Stats
       ▼
┌─────────────────────┐
│   Affichage UI      │
│   - Boxes colorées  │
│   - Person IDs      │
│   - Compteurs HUD   │
└─────────────────────┘